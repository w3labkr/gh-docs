<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="x-dns-prefetch-control" content="on">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!--
  DNS-prefetch is an attempt to resolve domain names before resources get requested.
  This could be a file loaded later or link target a user tries to follow.

  https://developer.mozilla.org/en-US/docs/Web/Performance/dns-prefetch
  -->
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
  <link rel="preconnect" href="https://ajax.googleapis.com" crossorigin>
  <link rel="dns-prefetch" href="https://ajax.googleapis.com">

  <!--
  A modern alternative to CSS resets

  https://necolas.github.io/normalize.css/
  -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.css">

  <!--
  Official open source SVG icon library for Bootstrap.

  https://icons.getbootstrap.com/
  -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">

  <title>gh-docs</title>

  <style>
* {
  box-sizing: border-box;
  font-weight: 100;
  font-family: 'Noto Sans KR', sans-serif;
}
a {
  text-decoration: none;
}
a:focus,
a:active,
a:hover {
  text-decoration: underline;
}
.site {
  padding-top: 60px;
}
.site-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  height: 60px;
  padding: 0 15px;
  border-bottom: 1px solid #dddddd;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  background-color: #ffffff;
  z-index: 999;
  box-shadow: 0 1px 20px 0 rgb(0 0 0 / 10%);
}
.site-title {
  font-size: 18px;
}
.site-nav a {
  margin-left: 5px;
}
.site-nav a.active {
  color: rgb(255 0 0);
}
  </style>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-178473923-2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-178473923-2');
  </script>

</head>

<body>
  <div id="page" class="site">
    <div id="progress-bar"></div>

    <header id="page-header" class="site-header">
      <h1 class="site-title">W3LabKr</h1>
      <nav id="page-nav" class="site-nav">
        <a class="active" href="inc/ex1.html">Doc</a>
        <a href="inc/ex2.html">API</a>
        <a href="https://github.com/w3labkr/gh-docs" target="_blank">
          <i class="bi bi-box-arrow-up-right"></i> Github
        </a>
      </nav>
    </header>

    <div id="page-content" class="site-content">
      <main id="primary" class="site-main">
        <iframe id="iframe" src="inc/ex1.html" frameborder="0" scrolling="no" style="width:100%;height:100vh;"></iframe>
      </main>
    </div>

    <footer class="site-footer"></footer>
  </div><!-- #site -->

  <!--
  Web Font Loader gives you added control when using linked fonts via @font-face.

  https://github.com/typekit/webfontloader
  -->
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"></script>
  <script>
  var WebFontConfig = {
    google: {
      families: ['Noto Sans KR:100'],
      text: ' !"#$%&\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuvwxyz{|}~'
    }
  };
  WebFont.load(WebFontConfig);
  </script>

  <!--
  GreenSock's GSAP JavaScript animation library (including Draggable).

  https://github.com/greensock/GSAP
  -->
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.9.1/dist/gsap.min.js"></script>
  <script>
    var _iframe = document.getElementById('iframe');
    var _progress = gsap.timeline({
      paused: true,
      repeat: -1,
      repeatDelay: 1,
      defaults: {
        duration: 1,
        ease: "power2.inOut"
      }
    });

    sidebarHandler();
    iframeHandler();
    progressHandler();

    function sidebarHandler() {
      var anchors = document.querySelectorAll('#page-nav a');
      anchors.forEach(function(anchor) {
        anchor.addEventListener('click', function(e) {
          if (this.target === '_blank') {
            // ...
          } else {
            e.preventDefault();
          }

          setActiveClass(this);
          setIframe(this);

          return false;
        });
      });
    }

    function setActiveClass(target) {
      var siblings = [].slice.call(target.parentNode.children).filter(function (sibling) {
        return sibling !== target;
      });

      siblings.forEach(function(sibling) {
        sibling.classList.remove('active');
      });

      target.classList.add('active');
    }

    function setIframe(target) {
      _progress.play();
      _iframe.src = target.getAttribute('href');
    }

    function iframeHandler() {
      _iframe.addEventListener('load', function() {
        _progress.tweenFromTo(0, 1);

        var body = this.contentWindow.document.body;
        this.width = body.scrollWidth;
        this.height = body.scrollHeight;
        this.style.height = body.scrollHeight + 'px';
      });
    }

    function progressHandler() {
      var div = document.getElementById('progress-bar');
      div.style.overflow = 'hidden';
      div.style.position = 'fixed';
      div.style.top = '0';
      div.style.left = '0';
      div.style.zIndex = '1000';
      div.style.width = '100%';
      div.style.height = '3px';
      div.style.backgroundColor = 'transparent';

      var span = document.createElement('span');
      span.style.display = 'block';
      span.style.position = 'absolute';
      span.style.top = '0';
      span.style.left = '0';
      span.style.width = '0';
      span.style.height = '100%';
      span.style.backgroundColor = '#222222';

      div.appendChild(span);

      _progress.fromTo(span, { width: '0' }, { width: '100%' });
    }
  </script>
</body>

</html>
